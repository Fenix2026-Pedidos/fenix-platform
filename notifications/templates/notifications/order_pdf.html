<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <style>
        @page {
            size: A4;
            margin: 1cm;
        }

        body {
            font-family: Helvetica, Arial, sans-serif;
            font-size: 9pt;
            color: #111827;
            /* gray-900 */
            line-height: 1.5;
            background-color: #ffffff;
        }

        /* Containers */
        .card {
            border: 1px solid #e5e7eb;
            /* gray-200 */
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .card-header {
            background-color: #ffffff;
            border-bottom: 1px solid #e5e7eb;
            padding: 12px 16px;
        }

        .card-body {
            padding: 16px;
        }

        .card-title {
            font-size: 11pt;
            font-weight: bold;
            color: #111827;
            margin: 0;
        }

        /* Typography */
        .text-gray-500 {
            color: #6b7280;
        }

        .text-primary-600 {
            color: #0284c7;
        }

        .text-uppercase {
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .font-bold {
            font-weight: bold;
        }

        .font-semibold {
            font-weight: 600;
        }

        /* Grid replacement (Tables for layout) */
        .layout-table {
            width: 100%;
            border-collapse: collapse;
        }

        .layout-table td {
            vertical-align: top;
            width: 33.33%;
            padding: 0 10px;
        }

        .layout-table td:first-child {
            padding-left: 0;
        }

        .layout-table td:last-child {
            padding-right: 0;
        }

        /* Status Badge */
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 9999px;
            font-size: 8pt;
            font-weight: 600;
            text-align: center;
        }

        .status-new {
            background-color: #e0f2fe;
            color: #0369a1;
        }

        /* primary-100 / primary-700 */

        /* Labels and Values */
        .detail-label {
            font-size: 7.5pt;
            color: #6b7280;
            text-transform: uppercase;
            margin-bottom: 2px;
            font-weight: 600;
        }

        .detail-value {
            font-size: 9pt;
            margin-bottom: 10px;
        }

        /* Products Table */
        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            background-color: #f9fafb;
            /* gray-50 */
            border-bottom: 1px solid #e5e7eb;
            padding: 10px 8px;
            font-size: 8pt;
            color: #6b7280;
            text-align: left;
            text-transform: uppercase;
        }

        .table td {
            padding: 10px 8px;
            border-bottom: 1px solid #f3f4f6;
            /* gray-100 */
            vertical-align: middle;
        }

        .text-center {
            text-align: center;
        }

        .text-right {
            text-align: right;
        }

        /* Totals */
        .totals-section {
            background-color: #f9fafb;
            padding: 16px;
            border-top: 1px solid #e5e7eb;
        }

        .totals-table {
            width: 300px;
            margin-left: auto;
        }

        .totals-table td {
            padding: 4px 0;
        }

        .total-row {
            border-top: 2px solid #d1d5db;
            /* gray-300 */
            margin-top: 8px;
        }

        .total-value {
            font-size: 16pt;
            font-weight: bold;
            color: #0284c7;
            /* primary-600 */
        }
    </style>
</head>

<body>
    <!-- Main Header Card -->
    <div class="card">
        <div class="card-body" style="padding: 24px;">
            <table width="100%">
                <tr>
                    <td>
                        <h1 style="margin: 0; font-size: 22pt; color: #111827;">Pedido #{{ order.id }}</h1>
                        <p style="margin: 5px 0 0 0; color: #6b7280;">Fecha de creación: {{ order.created_at|date:"d/m/Y
                            H:i" }}</p>
                    </td>
                    <td align="right" valign="middle">
                        <span class="status-badge status-{{ order.status }}">
                            {{ order.get_status_display }}
                        </span>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <!-- Info Card -->
    <div class="card">
        <div class="card-header">
            <h5 class="card-title">Información del Pedido</h5>
        </div>
        <div class="card-body">
            <table class="layout-table">
                <tr>
                    <td>
                        <h6 style="font-size: 8pt; color: #6b7280; margin-bottom: 12px;" class="text-uppercase">
                            Información del Cliente</h6>

                        <div class="detail-label">Cliente</div>
                        <div class="detail-value font-bold">{{ customer.full_name|default:customer.email }}</div>

                        {% if customer.company %}
                        <div class="detail-label">Empresa</div>
                        <div class="detail-value">{{ customer.company }}</div>
                        {% endif %}

                        <div class="detail-label">Correo Electrónico</div>
                        <div class="detail-value">{{ customer.email }}</div>

                        {% if customer.telefono_reparto %}
                        <div class="detail-label">Teléfono Reparto/Incidencias</div>
                        <div class="detail-value font-semibold text-primary-600">{{ customer.telefono_reparto }}</div>
                        {% endif %}
                    </td>
                    <td>
                        <h6 style="font-size: 8pt; color: #6b7280; margin-bottom: 12px;" class="text-uppercase">Datos
                            del Pedido</h6>

                        <div class="detail-label">Nº Pedido / ID</div>
                        <div class="detail-value font-bold text-primary-600" style="font-size: 14pt;">#{{ order.id }}
                        </div>

                        <div class="detail-label">Fecha de Creación</div>
                        <div class="detail-value">{{ order.created_at|date:"d/m/Y H:i" }}</div>

                        <div class="detail-label">Fecha de Entrega</div>
                        <div class="detail-value text-gray-500">—</div>

                        <div class="detail-label">Estado</div>
                        <div class="detail-value">
                            <span class="status-badge status-{{ order.status }}">{{ order.get_status_display }}</span>
                        </div>
                    </td>
                    <td>
                        <h6 style="font-size: 8pt; color: #6b7280; margin-bottom: 12px;" class="text-uppercase">
                            Dirección de Entrega</h6>

                        <div class="detail-label">Ciudad</div>
                        <div class="detail-value">{{ customer.ciudad|default:"—" }}</div>

                        <div class="detail-label">Dirección</div>
                        <div class="detail-value">{{
                            customer.direccion_entrega|default:customer.direccion_local|default:"—" }}</div>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <!-- Details Card -->
    <div class="card">
        <div class="card-header">
            <h5 class="card-title">Detalles del Pedido</h5>
        </div>
        <div class="table-wrapper">
            <table class="table">
                <thead>
                    <tr>
                        <th class="text-center" width="15%">ID PEDIDO</th>
                        <th width="45%">PRODUCTO</th>
                        <th class="text-center" width="10%">CANTIDAD</th>
                        <th class="text-right" width="15%">PRECIO UNITARIO</th>
                        <th class="text-right" width="15%">TOTAL LÍNEA</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in items %}
                    <tr>
                        <td class="text-center text-gray-500">#{{ order.id }}</td>
                        <td>
                            <div class="font-semibold">{{ item.product_name_es }}</div>
                            {% if item.product.sku %}
                            <div style="font-size: 7.5pt; color: #6b7280;">SKU: {{ item.product.sku }}</div>
                            {% endif %}
                        </td>
                        <td class="text-center">{{ item.quantity }}</td>
                        <td class="text-right">{{ item.unit_price|floatformat:2 }} €</td>
                        <td class="text-right font-bold">{{ item.line_total|floatformat:2 }} €</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="totals-section">
            <table class="totals-table">
                <tr>
                    <td class="text-gray-500">Subtotal:</td>
                    <td class="text-right font-bold" style="font-size: 11pt;">{{ subtotal|floatformat:2 }} €</td>
                </tr>
                <tr class="total-row">
                    <td style="font-size: 14pt; padding-top: 12px;" class="font-bold">Total:</td>
                    <td class="text-right total-value" style="padding-top: 12px;">{{ order.total_amount|floatformat:2 }}
                        €</td>
                </tr>
            </table>
        </div>
    </div>

    <div style="text-align: center; font-size: 8pt; color: #9ca3af; margin-top: 30px;">
        Este documento ha sido generado automáticamente por la plataforma Fenix el {{ now|date:"d/m/Y H:i" }}.
    </div>
</body>

</html>